<!DOCTYPE html>
<html dir="ltr" lang="en">
    <head>
        <meta charset="utf-8">
        <link href="https://fonts.googleapis.com" rel="preconnect">
        <link crossorigin href="https://fonts.gstatic.com" rel="preconnect">
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,200;0,300;0,700;1,300&display=swap"
              rel="stylesheet">
        <link rel="stylesheet" href="./Stylesheets/styles.css">
        <title>Advent of Code Lite</title>
    </head>
    <body>
        <div id="app">
            <article class="problem-list">
                <div v-for="i in problemCount">
                    <a class="link" :href="'./Problems/Day0' + i + '/task.html'">{{i}}</a>
                    <em v-if="starCount(i) === 2" class="star">**</em>
                    <em v-if="starCount(i) === 1" class="star">*</em>
                </div>
            </article>
        </div>
    </body>
    <script src="./Libraries/vue.min.js"></script>
    <script>
        var app = new Vue({
            el: "#app",
            data: {
                problemCount: 6,
                saveName: "Buck4437_AoC_Lite_2021_stars",
                stars: {}
            },
            created() {
                this.updateStar();
                window.addEventListener('storage', this.updateStar);
            },
            methods: {
                starCount(i) { return this.stars[i] || 0; },
                updateStar() {
                    try {
                        this.stars = JSON.parse(localStorage.getItem(this.saveName)) || {};
                    } catch(e) {
                        this.stars = {};
                    }
                },
                clearData() {
                    localStorage.removeItem(this.saveName);
                }
            }
        })
    </script>
</html>
